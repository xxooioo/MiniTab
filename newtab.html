<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>MiniTab</title>
  <link rel="icon" href="icons/icon.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="background-overlay"></div>
  
  <!-- 撤回删除提示将通过 JS 动态创建 -->
  
  <!-- 标签页切换 -->
  <div class="tabs-sidebar">
    <div class="tabs-list" id="tabsList">
      <!-- 标签页列表将通过 JS 动态生成，包含添加按钮 -->
    </div>
  </div>
  
  <div class="container">
    <!-- 搜索框 -->
    <div class="search-container">
      <div class="search-wrapper">
        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <input 
          type="text" 
          class="search-input" 
          id="searchInput" 
          placeholder="搜索或输入网址..."
          autocomplete="off"
          spellcheck="false"
        >
      </div>
    </div>

    <!-- 快捷方式网格 -->
    <div class="shortcuts-section">
      <div class="shortcuts-grid" id="shortcutsGrid">
        <!-- 快捷方式将通过 JavaScript 动态生成，包含添加按钮 -->
      </div>
    </div>

    <!-- 设置按钮 -->
    <button class="settings-btn" id="settingsBtn" title="设置">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"></path>
      </svg>
    </button>
  </div>

  <!-- 添加/编辑快捷方式对话框 -->
  <div class="modal" id="addShortcutModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">添加图标</h3>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="siteName">网站名称</label>
          <input type="text" id="siteName" placeholder="例如：Google">
        </div>
        <div class="form-group">
          <label for="siteUrl">网站地址</label>
          <input type="url" id="siteUrl" placeholder="https://www.google.com">
        </div>
        <div class="form-group">
          <label for="siteIcon">图标URL</label>
          <div class="icon-input-group">
            <input type="url" id="siteIcon" placeholder="留空则自动获取">
            <input type="file" id="iconFileInput" accept="image/*" style="display: none;">
            <button class="btn btn-icon-upload" id="uploadIconBtn" type="button" title="上传自定义图标">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
              </svg>
            </button>
            <button class="btn btn-icon-text" id="textIconBtn" type="button" title="文字图标">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 7V4h16v3M9 20h6M12 4v16"></path>
              </svg>
            </button>
          </div>
          <small class="form-hint">可上传本地图片、输入URL，或点击 T 生成文字图标</small>
        </div>
        <div class="form-group" id="textIconGroup" style="display: none;">
          <label for="textIconInput">文字图标</label>
          <input type="text" id="textIconInput" placeholder="输入1-3个字符" maxlength="3">
          <small class="form-hint">将生成带彩色背景的文字图标，颜色可自选。</small>
          <div class="text-icon-color-picker" id="textIconColorPicker" style="display: none;">
            <div class="color-picker-grid" id="textIconColorGrid">
              <!-- 颜色选项将通过 JavaScript 动态生成 -->
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelBtn">取消</button>
        <button class="btn btn-primary" id="saveBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 标签页编辑模态框 -->
  <div class="tab-edit-modal" id="tabEditModal">
    <div class="tab-edit-content">
      <div class="modal-header">
        <h3 id="tabEditTitle">编辑页面</h3>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="tabName">页面名称</label>
          <input type="text" id="tabName" placeholder="页面名称">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelTabEdit">取消</button>
        <button class="btn btn-primary" id="saveTabEdit">保存</button>
      </div>
    </div>
  </div>

  <!-- 分组弹窗 -->
  <div class="modal folder-modal" id="folderModal">
    <!-- 分组名称在框外上方 -->
    <h3 id="folderName" class="folder-name-outside">分组</h3>
    
    <div class="modal-content folder-modal-content">
      <div class="folder-grid" id="folderGrid">
        <!-- 分组内的快捷方式将通过 JavaScript 动态生成 -->
      </div>
    </div>
  </div>

  <!-- 设置面板 -->
  <div class="settings-panel" id="settingsPanel">
    <div class="settings-content">
      <div class="settings-header">
        <h3>设置</h3>
        <button class="close-btn" id="closeSettings">&times;</button>
      </div>
      <div class="settings-body">
        <div class="setting-group">
          <span class="setting-label">背景</span>
          <div class="background-options">
            <input type="file" id="bgUpload" accept="image/*" style="display:none">
            <button class="btn btn-secondary" id="uploadBgBtn">上传图片</button>
            <button class="btn btn-secondary" id="randomBgBtn">随机背景</button>
            <button class="btn btn-secondary" id="resetBgBtn">初始背景</button>
          </div>
        </div>
        <div class="setting-group">
          <span class="setting-label">搜索引擎</span>
          <div class="custom-select" id="engineSelect">
            <div class="custom-select-trigger">
              <span id="selectedEngine">Google</span>
              <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 4l4 4 4-4"></path>
              </svg>
            </div>
            <div class="custom-select-options">
              <div class="custom-select-option active" data-value="google">Google</div>
              <div class="custom-select-option" data-value="bing">Bing</div>
              <div class="custom-select-option" data-value="baidu">百度</div>
              <div class="custom-select-option" data-value="custom">自定义</div>
            </div>
          </div>
          <div class="custom-engine-input" id="customEngineInput" style="display: none;">
            <label for="customEngineUrl" class="sr-only">自定义搜索引擎URL</label>
            <input type="text" id="customEngineUrl" placeholder="e.g. https://example.com/search?q=%s（ %s 为占位符）">
          </div>
        </div>
        <div class="setting-group">
          <label for="searchOpacity">搜索框透明度：<span id="opacityValue">5%</span></label>
          <input type="range" id="searchOpacity" class="range-input" min="0" max="50" value="5" step="1">
          <p class="setting-description">数值越大越不透明</p>
        </div>
        <div class="setting-group">
          <label for="gridColumns">图标区域宽度：<span id="columnsValue">12</span></label>
          <input type="range" id="gridColumns" class="range-input" min="6" max="12" value="12" step="1">
          <p class="setting-description">调整每行显示的图标数量</p>
        </div>
        <div class="setting-group">
          <label for="autoHideToggle" class="toggle-label">
            <span>自动隐藏控制按钮</span>
            <input type="checkbox" id="autoHideToggle">
            <span class="toggle-slider"></span>
          </label>
          <p class="setting-description">鼠标移开后自动隐藏侧边栏和设置按钮</p>
        </div>
        <div class="setting-group">
          <span class="setting-label">数据备份</span>
          <div class="background-options">
            <label for="dataImport" class="sr-only">导入数据文件</label>
            <input type="file" id="dataImport" accept=".json" style="display:none">
            <button class="btn btn-secondary" id="exportDataBtn">导出数据</button>
            <button class="btn btn-secondary" id="importDataBtn">导入数据</button>
          </div>
          <p class="setting-description">备份或恢复你的所有标签页和快捷方式数据</p>
        </div>
      </div>
    </div>
  </div>

  <script src="drag-handler.js"></script>
  <script src="script.js"></script>
</body>
</html>

